<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./user-profile-page-brown.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap"
    />
  </head>
  <body>
    <div class="user-profile-page-brown">
      <section class="log-in10">
        <img class="image-7-icon" alt="" />

        <div class="image-16"></div>
        <div class="image-161"></div>
        <div class="navi">
          <div class="logo-parent">
            <img class="logo-icon" loading="eager" src="logo1.svg" alt="" />

            <div class="most-trusted-donator">
              <h2 class="prayaas-sankalp6">Prayaas-Sankalp</h2>
            </div>
          </div>
          <div class="image">
            <button class="rectangle-group">
              <div class="frame-item"></div>
              <div class="home"><a href="home-page-brown.html">Home</a></div>
            </button>
          </div>
          <div class="donate-wrapper">
            <button class="donate">Donate</button>
          </div>
          <div class="volunteer-wrapper">
            <button class="volunteer">Volunteer</button>
          </div>
          <div class="collab-wrapper">
            <button class="collab">Collab</button>
          </div>
          <div class="cart-wrapper">
            <button class="cart">Cart</button>
          </div>
          <div class="tasty-donor">
            <button class="your-order">Your Order</button>
          </div>
          <div class="profilepic">
            <div class="help-center-terms-privacy-poli">
              <div class="help-center-terms-privacy-poli-child"></div>
              <img class="image-7-icon1" loading="eager" src="image-7@2x.png" alt="" />

              <div class="anthony-pinto-co-founder-container">
                <span>
                  <p class="anthony-pinto" id="profile-username"></p>
                  <p class="co-founder">Co-Founder</p>
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="dropdown2">
          <div class="copyright2">
            <div class="parent-frame-text-and-images">
              <div class="mainprofiledsh">
                <div class="frame-logo-and-title">
                  <div class="key-volunteer-frame">
                    <img class="image-8-icon" alt="" />

                    <img class="image-7-icon2" loading="eager" alt="" />
                  </div>
                </div>
                <div class="dropdown-instances-frame">
                  <div class="frame-footer-divider">
                    <div class="frame-footer-content">
                      <div class="help-center-terms-frame">
                        <div class="privacy-policy-frame1">
                          <div class="anthony-pinto-software-container">
                            <span>
                              <p class="anthony-pinto1">Anthony Pinto</p>
                              <p class="software-developer">
                                <!-- profession1 -->
                                <div class="profession1" id="profile-profession1"></div>
                                <div class="profession1" id="profile-profession2"></div>
                                Software Developer | ABC Volunteer | Part of
                                some assocication
                              </p>
                            </span>
                          </div>
                          <img class="image-10-icon" loading="eager" alt="" />
                        </div>
                      </div>
                      <div class="frame-top-divider">
                        <img class="pin-icon" loading="eager" alt="" />

                        <div class="kothanur-bangalore" id="profile-address">
                          Kothanur, Bangalore
                        </div>
                      </div>
                    </div>
                    <div class="my-name-is-anthony" id="profile-bio">
                      <!-- My name is Anthony Pinto and I am a volunteer who likes to
                      be helpful to the society. I am a friendly and
                      approachable person who is always willing to lend a hand
                      to those in need. I believe that giving back to the
                      community is one of the most important things that we can
                      do as human beings. In my free time. -->
                    </div>
                    <div class="frame-header-content">
                      <div class="frame-body-content">
                        <div class="joined-on-19">Joined on 19 Apr 2023</div>
                        <div class="image-rectangle">
                          <img class="image-13-icon" loading="eager" alt="" />

                          <img class="image-12-icon" loading="eager" alt="" />

                          <img class="image-11-icon" loading="eager" alt="" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="container-frame">
                <div class="interest">
                  <div class="interest-child"></div>
                  <div class="help-center-terms">
                    <h1 class="interests-skills">Interests / Skills</h1>
                  </div>
                  <div class="nexus-wave-frame">
                    <div class="prayaas-sankalp7">
                      <button class="communciation">
                        <div class="communciation-child"></div>
                        <div class="vertical-separator">
                          <div class="communication" id="profile-skill1"></div>
                        </div>
                        <img class="image-14-icon" alt="" />
                      </button>
                      <button class="communciation1">
                        <div class="communciation-item"></div>
                        <div class="volunteering" id="profile-skill2"></div>
                        <img class="image-14-icon1" alt="" />
                      </button>
                    </div>
                    <button class="probles">
                      <div class="probles-child"></div>
                      <div class="problem-solving" id="profile-skill3"></div>
                      <img class="image-14-icon2" alt="" />
                    </button>
                    <button class="organza">
                      <div class="organza-child"></div>
                      <div class="additional-info-btn">
                        <div class="organizational-skills">
                          Organizational skills
                        </div>
                      </div>
                      <div class="top-giver">
                        <img class="image-14-icon3" alt="" />
                      </div>
                    </button>
                  </div>
                </div>
                <div class="contact-info">
                  <div class="contact-info-child"></div>
                  <h1 class="contact-info1">Contact Info</h1>
                  <div class="frame-parent1">
                    <div class="mobile-parent">
                      <button class="mobile">
                        <div class="mobile-child"></div>
                        <img class="image-15-icon" alt="" />

                        <div class="text3" id="profile-phoneNo">+91 94572904585</div>
                      </button>
                      <div class="email">
                        <div class="email-child"></div>
                        <img class="image-15-icon1" alt="" />

                        <div class="wwwfigmacom" id="profile-socialMedia">www.figma.com</div>
                      </div>
                    </div>
                    <div class="contribution">
                      <button class="insta">
                        <div class="insta-child"></div>
                        <img class="image-15-icon2" alt="" />

                        <div class="figma-">_.Figma._</div>
                      </button>
                      <button class="twiiter">
                        <div class="twiiter-child"></div>
                        <img class="image-15-icon3" alt="" />

                        <div class="figma-1">_.Figma._</div>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="frame-parent2">
              <div class="rectangle-container">
                <div class="frame-inner"></div>
                <div class="contribution1">
                  <div class="contribution-parent">
                    <h1 class="contribution2">Contribution</h1>
                    <div class="contribution-1-container">
                      <p class="contribution-1-">
                        Contribution 1 :- You hae been awarded for the best
                        participation.
                      </p>
                      <p class="contribution-2-">
                        Contribution 2 :- You have been incredible volunteer our
                        website
                      </p>
                      <p class="contribution-3-">
                        Contribution 3 :- By people’s review you have earned the
                        title “Most Trusted Donor”
                      </p>
                      <p class="contribution-4-">
                        Contribution 4 :- Thank you for the participating the
                        food drive.
                      </p>
                      <p class="blank-line">&nbsp;</p>
                    </div>
                  </div>
                </div>
                <div class="see-more">
                  <div class="image-parent">
                    <div class="image1">
                      <img class="image-18-icon" loading="eager" alt="" />

                      <div class="most-trusted-donator1">
                        Most Trusted Donator
                      </div>
                    </div>
                    <img class="image-17-icon" loading="eager" alt="" />

                    <div class="text-frame1">
                      <div class="key-volunteer">Key Volunteer</div>
                    </div>
                  </div>
                  <div class="frames-section">
                    <div class="cleanliness-drive">
                      <div class="image-with-text">
                        <div class="volunteer-images">
                          <img class="image-19-icon" loading="eager" alt="" />
                          <div class="cleanliness-drive1">
                            Cleanliness drive
                          </div>
                        </div>
                        <div class="label-frames">
                          <img class="image-22-icon" loading="eager" alt="" />

                          <div class="label-frames1">
                            <div class="tasty-donor1">Tasty Donor</div>
                          </div>
                        </div>
                      </div>
                      <div class="more-frames">
                        <div class="see-more1">
                          <div class="see-more-child"></div>
                          <div class="see-more2">+ see more</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="rectangle-parent1">
                <div class="rectangle-div"></div>
                <div class="order-content-frame">
                  <h1 class="your-order1">Your Order</h1>
                </div>
                <img class="image-18-icon1" loading="eager" alt="" />

                <div class="donator-image">
                  <img class="image-19-icon1" loading="eager" alt="" />

                  <div class="tasty-donor-frame">
                    <div class="volunteer-key-frame">
                      <div class="most-trusted-donator2">
                        Most Trusted Donator
                      </div>
                      <img class="image-17-icon1" alt="" />

                      <div class="drive-frame">
                        <div class="key-volunteer1">Key Volunteer</div>
                      </div>
                    </div>
                    <div class="drive-frame1">
                      <div class="tasty-donor-image">
                        <div class="cleanliness-drive2">Cleanliness drive</div>
                        <div class="text-frames">
                          <div class="tasty-donor2">Tasty Donor</div>
                          <img class="image-22-icon1" loading="eager" alt="" />
                        </div>
                      </div>
                      <div class="see-more-frame">
                        <div class="see-more3">
                          <div class="see-more-item"></div>
                          <div class="see-more4">+ see more</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <footer class="footer4">
        <div class="help-center-frame">
          <div class="divider-top4"></div>
        </div>
        <div class="help-center-frame1">
          <div class="terms-of-service-frame">
            <div class="privacy-policy-frame2">
              <button class="help-center4">Help Center</button>
            </div>
            <div class="privacy-policy-frame3">
              <button class="terms-of-service4">Terms of Service</button>
            </div>
            <div class="privacy-policy-frame4">
              <button class="privacy-policy4">Privacy Policy</button>
            </div>
            <div class="privacy-policy-frame5">
              <button class="about8">About</button>
            </div>
            <div class="privacy-policy-frame6">
              <button class="settings4">Settings</button>
            </div>
            <div class="footer-frame1">
              <div class="logo-instance">
                <div class="logo2">
                  <img class="icon11" loading="eager" alt="" />

                  <img class="nexcent-icon2" loading="eager" alt="" />
                </div>
              </div>
              <div class="prayaas-sankalp-text">
                <h1 class="prayaas-sankalp8">Prayaas-Sankalp</h1>
                <h2 class="rendering-our-service6">
                  Rendering our service for the others
                </h2>
              </div>
            </div>
            <div class="help-center-links-frame">
              <div class="dropdown-instance">
                <div class="dropdown3">
                  <div class="text4">English (united States)</div>
                  <img class="icons10" loading="eager" alt="" />
                </div>
                <div class="copyright3">
                  <div class="copyright-20242">Copyright © 2024 NexusWave.</div>
                  <div class="all-rights-reserved2">All rights reserved</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="help-center-frame2">
          <div class="divider-bottom5"></div>
        </div>
      </footer>
    </div>
      <!-- <script></script> -->
        <!-- Include Firebase SDK -->
        <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    
        <!-- Your web app's Firebase configuration -->
        <script>
            const firebaseConfig = {
                apiKey: "AIzaSyCDlvliI_5vDuKaO0rSl91ruryXijgujpA",
                authDomain: "registeration-e2a50.firebaseapp.com",
                databaseURL: "https://registeration-e2a50-default-rtdb.firebaseio.com",
                projectId: "registeration-e2a50",
                storageBucket: "registeration-e2a50.appspot.com",
                messagingSenderId: "370155386398",
                appId: "1:370155386398:web:5947563e78308b55f0e00f"
            };
    
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            const database = firebase.database();
            const auth = firebase.auth();
    
            // Sign out function
            function signOut() {
                firebase.auth().signOut().then(() => {
                    alert("User signed out successfully!");
                    window.location.href="test2.html"
                    // You can redirect the user or perform additional actions here
                }).catch((error) => {
                    console.error('Error signing out:', error);
                });
            }
    
            // Check for user authentication state
            firebase.auth().onAuthStateChanged(user => {
                if (user) {
                    // User is signed in
                    const userId = user.uid;
    
                    // Fetch user data from Realtime Database
                    const userRef = database.ref(`users/${userId}`);
                    userRef.once('value', snapshot => {
                        const userData = snapshot.val();
                        if (userData) {
                            console.log(userData);
                            // Display user data on the front end
                            // document.getElementById('profile-email').textContent = user.email || 'N/A';
                            document.getElementById('profile-username').textContent = userData.username || 'N/A';
                            document.getElementById('profile-profession1').textContent = userData.profession || 'N/A';
                            document.getElementById('profile-profession2').textContent = userData.profession2 || 'N/A';
                            document.getElementById('profile-skill1').textContent = userData.interestSkill1 || 'N/A';
                            document.getElementById('profile-skill2').textContent = userData.interestSkill2 || 'N/A';
                            document.getElementById('profile-skill3').textContent = userData.interestSkill3 || 'N/A';
                            document.getElementById('profile-phoneNo').textContent = userData.mobileNo || 'N/A';
                            document.getElementById('profile-address').textContent = userData.address || 'N/A';
                            document.getElementById('profile-bio').textContent = userData.bio || 'N/A';
                            document.getElementById('profile-socialMedia').textContent = userData.socialMedia ? userData.socialMedia.join(', ') : 'N/A';
                        }
                    });
    
                    // Fetch user cart data from Realtime Database
                    const cartRef = database.ref(`cartData/${userId}`);
                    cartRef.on('value', snapshot => {
                        const cartData = snapshot.val();
                        const cartItems = document.getElementById('cart-items');
                        cartItems.innerHTML = ''; // Clear previous content
    
                        if (cartData) {
                            // Display cart data on the front end
                            for (const productId in cartData) {
                                const product = cartData[productId];
                                // Display the product information
                                const listItem = document.createElement('li');
                                listItem.innerHTML = `
                                    <strong>Product Name:</strong> ${product.product_Name || 'N/A'}<br>
                                    <strong>Product Price:</strong> ${product.product_Price || 'N/A'}<br>
                                    <strong>Product Description:</strong> ${product.product_Description || 'N/A'}<br>
                                    <strong>Product Quantity:</strong> ${product.product_Quantity || 'N/A'}<br>
                                    <button onclick="buyNow('${productId}')">Buy Now</button>
                                    <hr>
                                `;
                                cartItems.appendChild(listItem);
                            }
                        }
                    });
    
                    // Fetch ordered list data from Realtime Database
                    const orderedListRef = database.ref(`orderedList/${userId}`);
                    orderedListRef.on('value', snapshot => {
                        const orderedListData = snapshot.val();
                        const orderedItems = document.getElementById('ordered-items');
                        orderedItems.innerHTML = ''; // Clear previous content
    
                        if (orderedListData) {
                            // Display ordered list on the front end
                            for (const orderId in orderedListData) {
                                const order = orderedListData[orderId];
                                // Display the order information
                                const listItem = document.createElement('li');
                                listItem.innerHTML = `
                                    <strong>Product Name:</strong> ${order.product_Name || 'N/A'}<br>
                                    <strong>Product Price:</strong> ${order.product_Price || 'N/A'}<br>
                                    <strong>Product Description:</strong> ${order.product_Description || 'N/A'}<br>
                                    <strong>Product Quantity:</strong> ${order.product_Quantity || 'N/A'}<br>
                                    <hr>
                                `;
                                orderedItems.appendChild(listItem);
                            }
                        }
                    });
    
                } else {
                    // User is not signed in
                    document.getElementById('error-message').textContent = 'User not signed in';
                }
            });
    
            function buyNow(productId) {
                const userId = firebase.auth().currentUser.uid;
                const cartRef = database.ref(`cartData/${userId}/${productId}`);
                const orderedListRef = database.ref(`orderedList/${userId}`);
                cartRef.once('value', snapshot => {
                    const product = snapshot.val();
                    if (product) {
                        // Move the product to the ordered list
                        orderedListRef.push(product)
                            .then(() => {
                                // Remove the product from the cart
                                cartRef.remove()
                                    .then(() => {
                                        // Update the cart display
                                        // fetch user cart data again
                                        const cartItems = document.getElementById('cart-items');
                                        cartItems.innerHTML = '';
                                        cartRef.once('value', snapshot => {
                                            const cartData = snapshot.val();
                                            if (cartData) {
                                                // Display cart data on the front end
                                                for (const productId in cartData) {
                                                    const product = cartData[productId];
                                                    // Display the product information
                                                    const listItem = document.createElement('li');
                                                    listItem.innerHTML = `
                                                        <strong>Product Name:</strong> ${product.product_Name || 'N/A'}<br>
                                                        <strong>Product Price:</strong> ${product.product_Price || 'N/A'}<br>
                                                        <strong>Product Description:</strong> ${product.product_Description || 'N/A'}<br>
                                                        <strong>Product Quantity:</strong> ${product.product_Quantity || 'N/A'}<br>
                                                        <button onclick="buyNow('${productId}')">Buy Now</button>
                                                        <hr>
                                                    `;
                                                    cartItems.appendChild(listItem);
                                                }
                                            }
                                        });
                                        alert("Product bought successfully!");
                                    })
                                    .catch(error => {
                                        console.error('Error removing product from cart:', error);
                                    });
                            })
                            .catch(error => {
                                console.error('Error moving product to ordered list:', error);
                            });
                    }
                });
            }
        </script>
  </body>
</html>
